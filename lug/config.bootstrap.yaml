interval: 10 # Interval between pollings
loglevel: 4 # 1-5
concurrent_limit: 3
# Prometheus metrics are exposed at http://exporter_address/metrics
exporter_address: :8081

# Address where JSON API will be served
json_api:
  address: :7001

dummy:
  oneshot_common: &oneshot_common
    retry: 5
    retry_interval: 60

repos:
  # centos
  - type: shell_script
    script: /worker-script/rsync.sh
    # not available yet -> rsync://msync.centos.org/CentOS/
    source: rsync://mirrors.tuna.tsinghua.edu.cn/centos/
    interval: 25600
    path: /srv/disk1/centos
    name: centos
    <<: *oneshot_common
  # debian
  - type: shell_script
    script: /worker-script/ubuntu-debian-rsync.sh
    source: rsync://mirrors.tuna.tsinghua.edu.cn/debian/ #check passed
    interval: 43200
    path: /srv/disk1/debian
    name: debian
    no_redir_http: true
    <<: *oneshot_common
  # debian-cd
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://mirrors.kernel.org/debian-cd/ #check passed
    interval: 23600
    path: /srv/disk1/debian-cd
    name: debian-cd
    <<: *oneshot_common
  # debian-security
  - type: shell_script
    script: /worker-script/rsync.sh
    #check passed
    source: rsync://rsync.security.debian.org/debian-security/ #check passed
    interval: 21100
    path: /srv/disk1/debian-security
    name: debian-security
    <<: *oneshot_common
  # deepin
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://rsync.deepin.com/deepin/ #check passed
    interval: 21900
    path: /srv/disk1/deepin
    name: deepin
    <<: *oneshot_common
  # deepin-cd
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://rsync.deepin.com/cdimage/ #check passed 
    interval: 22900
    path: /srv/disk1/deepin-cd
    name: deepin-cd
    <<: *oneshot_common
  # docker-ce
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://mirrors.tuna.tsinghua.edu.cn/docker-ce #check passed
    interval: 86400
    path: /srv/disk1/docker-ce
    name: docker-ce
    <<: *oneshot_common
  # fedora/linux
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://download-ib01.fedoraproject.org/fedora-enchilada/linux/ #check passed
    interval: 21600
    path: /srv/disk1/fedora/linux
    name: fedora/linux
    rsync_extra_flags: --exclude "development/*" --exclude "extras/*" --exclude "*/debug/*"
    <<: *oneshot_common
  # fedora/epel
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://mirrors.kernel.org/fedora-epel/
    interval: 22600
    path: /srv/disk1/fedora/epel
    name: fedora/epel
    rsync_extra_flags: --exclude "development/*" --exclude "extras/*" --exclude "*/debug/*"
    <<: *oneshot_common
  # fedora-secondary
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://mirrors.kernel.org/fedora-secondary/ #check passed
    interval: 23600
    path: /srv/disk1/fedora-secondary
    name: fedora-secondary
    rsync_extra_flags: --exclude "development/*" --exclude "extras/*" --exclude "*/debug/*"
    <<: *oneshot_common
  # linuxmint
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://mirrors.kernel.org/linuxmint-packages/ #check passed
    interval: 22600
    path: /srv/disk1/linuxmint
    name: linuxmint
    <<: *oneshot_common
  # linuxmint-cd
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://mirrors.kernel.org/linuxmint/ #check passed
    interval: 21000
    path: /srv/disk1/linuxmint-cd
    name: linuxmint-cd
    <<: *oneshot_common
  # mageia
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://mirrors.kernel.org/mageia/ #check passed
    interval: 21200
    path: /srv/disk1/mageia
    name: mageia
    <<: *oneshot_common
  # opensuse
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://fr2.rpmfind.net/linux/opensuse/ #check passed
    interval: 44200 # may be wrong
    path: /srv/disk1/opensuse
    name: opensuse
    <<: *oneshot_common
  # openvz
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://ftp.sjtu.edu.cn/openvz #check passed
    interval: 43200 # may be wrong
    path: /srv/disk2/openvz
    name: openvz
    <<: *oneshot_common
  # remi
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://ftp.sjtu.edu.cn/remi #check passed
    interval: 43200
    path: /srv/disk2/remi
    name: remi
    <<: *oneshot_common
  # scientific
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://ftp.sjtu.edu.cn/scientific #check not passed (num of IP?)
    interval: 21600 # may be wrong
    path: /srv/disk2/scientific
    name: scientific
    <<: *oneshot_common
  # ubuntu
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://ftp.sjtu.edu.cn/ubuntu #check not passed (num of IP?)
    interval: 21600
    path: /srv/disk2/ubuntu
    name: ubuntu
    <<: *oneshot_common
  # ubuntu-cd
  - type: shell_script
    script: /worker-script/rsync.sh
    source: rsync://ftp.sjtu.edu.cn/ubuntu-cd #check not passed (num of IP?)
    interval: 21600
    path: /srv/disk2/ubuntu-cd
    name: ubuntu-cd
    <<: *oneshot_common
